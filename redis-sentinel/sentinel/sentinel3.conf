port 26379
dir "/tmp"
# Redis 监控一个叫做 mymaster 的运行在 172.20.0.2:6379 的 master，投票达到 2 则表示 master 挂掉了。
sentinel myid 90bd36c5f9610bf988b939c223458e730771142f
# 设置主节点的密码
sentinel deny-scripts-reconfig yes
# 在一段时间范围内 sentinel 向 master 发送的心跳 PING 没有回复则认为 master 不可用了
sentinel monitor mymaster 172.20.0.2 6379 2
# 设置在故障转移之后，同时可以重新配置使用新 master 的 slave 的数量。
# 数字越低，更多的时间将会用故障转移完成，但是如果 slaves 配置为服务旧数据，你可能不希望所有的 slave 同时重新同步 master。
# 因为主从复制对于 slave 是非阻塞的，当停止从 master 加载批量数据时有一个片刻延迟。
# 通过设置选项为 1，确信每次只有一个 slave 是不可到达的。
sentinel auth-pass mymaster 123456
# 180 秒内 mymaster 还没活过来，则认为 master 宕机了
sentinel config-epoch mymaster 1
sentinel leader-epoch mymaster 1
# Generated by CONFIG REWRITE
user default on nopass ~* +@all
sentinel known-replica mymaster 172.20.0.3 6379
sentinel known-replica mymaster 172.20.0.4 6379
sentinel known-sentinel mymaster 172.20.0.7 26379 37b6245f44092c411661f08e359e57ca927d8499
sentinel known-sentinel mymaster 172.20.0.5 26379 3c78f0f80c1f1556e78e57295942de9c61d7285c
sentinel current-epoch 1
